{"swagger": "2.0", "info": {"title": "Snippets API", "description": "Test description", "termsOfService": "https://www.google.com/policies/terms/", "contact": {"email": "contact@snippets.local"}, "license": {"name": "BSD License"}, "version": "v1"}, "host": "127.0.0.1:5433", "schemes": ["http"], "basePath": "/", "consumes": ["application/json"], "produces": ["application/json"], "securityDefinitions": {"Basic": {"type": "basic"}}, "security": [{"Basic": []}], "paths": {"/filters": {"get": {"operationId": "filters_list", "description": "получение списка фильтров", "parameters": [{"name": "title", "in": "query", "description": "filter title", "type": "string"}], "responses": {"200": {"description": "", "schema": {"type": "array", "items": {"$ref": "#/definitions/AllFilters"}}}, "403": {"description": "Forbidden"}}, "tags": ["filters"]}, "parameters": []}, "/filters/add": {"post": {"operationId": "filters_add_create", "description": "добавить новую услугу", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"$ref": "#/definitions/OneFilter"}}], "responses": {"200": {"description": "", "schema": {"$ref": "#/definitions/OneFilter"}}, "400": {"description": "Bad Request"}, "403": {"description": "Forbidden"}}, "tags": ["filters"]}, "parameters": []}, "/filters/{id}": {"get": {"operationId": "filters_read", "description": "получение одного фильтра", "parameters": [], "responses": {"200": {"description": "Получение одного фильтра с матрицей", "schema": {"$ref": "#/definitions/OneFilter"}}, "404": {"description": "Фильтры не получены"}}, "tags": ["filters"]}, "parameters": [{"name": "id", "in": "path", "required": true, "type": "string"}]}, "/filters/{id}/add": {"post": {"operationId": "filters_add_create", "description": "создать новую очередь или добавить к существующей", "parameters": [], "responses": {"200": {"description": "OK"}, "403": {"description": "Forbidden"}, "404": {"description": "Not Found"}}, "tags": ["filters"]}, "parameters": [{"name": "id", "in": "path", "required": true, "type": "string"}]}, "/filters/{id}/change": {"put": {"operationId": "filters_change_update", "description": "изменить услугу", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"$ref": "#/definitions/OneFilter"}}], "responses": {"200": {"description": "", "schema": {"$ref": "#/definitions/OneFilter"}}, "400": {"description": "Bad Request"}, "404": {"description": "Not Found"}}, "tags": ["filters"]}, "parameters": [{"name": "id", "in": "path", "required": true, "type": "string"}]}, "/filters/{id}/delete": {"delete": {"operationId": "filters_delete_delete", "description": "удалить услугу", "parameters": [], "responses": {"200": {"description": "OK"}, "403": {"description": "Forbidden"}, "404": {"description": "Not Found"}}, "tags": ["filters"]}, "parameters": [{"name": "id", "in": "path", "required": true, "type": "string"}]}, "/filters/{id}/load": {"post": {"operationId": "filters_load_create", "description": "загрузить картинку фильтра в минио", "parameters": [{"name": "image", "in": "formData", "required": true, "type": "file"}], "responses": {"200": {"description": "OK"}, "400": {"description": "Bad Request"}, "403": {"description": "Forbidden"}}, "consumes": ["multipart/form-data"], "tags": ["filters"]}, "parameters": [{"name": "id", "in": "path", "required": true, "type": "string"}]}, "/queue": {"get": {"operationId": "queue_list", "description": "получить список очередей", "parameters": [{"name": "status", "in": "query", "description": "status", "type": "string"}, {"name": "formation_start", "in": "query", "description": "status", "type": "string", "format": "date-time"}, {"name": "formation_end", "in": "query", "description": "status", "type": "string", "format": "date-time"}], "responses": {"200": {"description": "", "schema": {"type": "array", "items": {"$ref": "#/definitions/Queue"}}}, "403": {"description": "Forbidden"}}, "tags": ["queue"]}, "parameters": []}, "/queue-filters/delete/{id_queue}/{order}": {"delete": {"operationId": "queue-filters_delete_delete", "description": "Удаление фильтра из очереди", "parameters": [], "responses": {"200": {"description": "OK"}, "403": {"description": "Forbidden"}, "404": {"description": "Not Found"}, "400": {"description": "Bad request"}}, "tags": ["queue-filters"]}, "parameters": [{"name": "id_queue", "in": "path", "required": true, "type": "string"}, {"name": "order", "in": "path", "required": true, "type": "string"}]}, "/queue-filters/switch/{queue}/{ord}": {"put": {"operationId": "queue-filters_switch_update", "description": "Изменение данных о грузе в отправлении", "parameters": [], "responses": {"200": {"description": "OK"}, "400": {"description": "Bad Request"}, "403": {"description": "Forbidden"}, "404": {"description": "Not Found"}}, "tags": ["queue-filters"]}, "parameters": [{"name": "queue", "in": "path", "required": true, "type": "string"}, {"name": "ord", "in": "path", "required": true, "type": "string"}]}, "/queue/{id}": {"get": {"operationId": "queue_read", "description": "получить очередь", "parameters": [], "responses": {"200": {"description": "", "schema": {"$ref": "#/definitions/QueueWithFilter"}}, "403": {"description": "Forbidden"}, "404": {"description": "Not Found"}}, "tags": ["queue"]}, "parameters": [{"name": "id", "in": "path", "required": true, "type": "string"}]}, "/queue/{id}/change": {"post": {"operationId": "queue_change_create", "description": "изменить изображение очереди", "parameters": [{"name": "image", "in": "formData", "required": true, "type": "file"}], "responses": {"200": {"description": "OK"}, "400": {"description": "Bad Request"}, "403": {"description": "Forbidden"}, "404": {"description": "Not Found"}}, "consumes": ["multipart/form-data"], "tags": ["queue"]}, "parameters": [{"name": "id", "in": "path", "required": true, "type": "string"}]}, "/queue/{id}/delete": {"delete": {"operationId": "queue_delete_delete", "description": "удалить оформление", "parameters": [], "responses": {"200": {"description": "OK"}, "403": {"description": "Forbidden"}, "404": {"description": "Not Found"}}, "tags": ["queue"]}, "parameters": [{"name": "id", "in": "path", "required": true, "type": "string"}]}, "/queue/{id}/form": {"put": {"operationId": "queue_form_update", "description": "сформировать очередь", "parameters": [], "responses": {"200": {"description": "", "schema": {"$ref": "#/definitions/Queue"}}, "400": {"description": "Bad Request"}, "403": {"description": "Forbidden"}, "404": {"description": "Not Found"}}, "tags": ["queue"]}, "parameters": [{"name": "id", "in": "path", "required": true, "type": "string"}]}, "/queue/{id}/resolve": {"put": {"operationId": "queue_resolve_update", "description": "отклонить или завершить оформление", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"$ref": "#/definitions/ResolveQueue"}}], "responses": {"200": {"description": "", "schema": {"$ref": "#/definitions/Queue"}}, "403": {"description": "Forbidden"}, "404": {"description": "Not Found"}, "400": {"description": "bad request"}}, "tags": ["queue"]}, "parameters": [{"name": "id", "in": "path", "required": true, "type": "string"}]}, "/user/login": {"post": {"operationId": "user_login_create", "description": "", "parameters": [{"name": "email", "in": "formData", "description": "username", "required": true, "type": "string"}, {"name": "password", "in": "formData", "description": "password", "required": true, "type": "string"}], "responses": {"200": {"description": "OK"}, "400": {"description": "Bad Request"}}, "consumes": ["application/x-www-form-urlencoded"], "tags": ["user"]}, "parameters": []}, "/user/logout": {"post": {"operationId": "user_logout_create", "description": "деавторизация", "parameters": [], "responses": {"204": {"description": "No content"}, "403": {"description": "Forbidden"}}, "tags": ["user"]}, "parameters": []}, "/user/register": {"post": {"operationId": "user_register_create", "description": "Функция регистрации новых пользователей\nЕсли пользователя c указанным в request email ещё нет, в БД будет добавлен новый пользователь.", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"$ref": "#/definitions/User"}}], "responses": {"201": {"description": "", "schema": {"$ref": "#/definitions/User"}}}, "tags": ["user"]}, "parameters": []}, "/user/update": {"put": {"operationId": "user_update_update", "description": "Обновление данных пользователя", "parameters": [{"name": "data", "in": "body", "required": true, "schema": {"$ref": "#/definitions/User"}}], "responses": {"200": {"description": "", "schema": {"$ref": "#/definitions/User"}}, "400": {"description": "Bad Request"}, "403": {"description": "Forbidden"}}, "tags": ["user"]}, "parameters": []}}, "definitions": {"AllFilters": {"required": ["title", "description"], "type": "object", "properties": {"id": {"title": "ID", "type": "integer", "readOnly": true}, "title": {"title": "Title", "type": "string", "maxLength": 50, "minLength": 1}, "description": {"title": "Description", "type": "string", "minLength": 1}, "image": {"title": "Image", "type": "string"}}}, "OneFilter": {"required": ["title", "matrix_values", "description"], "type": "object", "properties": {"id": {"title": "ID", "type": "integer", "readOnly": true}, "title": {"title": "Title", "type": "string", "maxLength": 50, "minLength": 1}, "matrix_values": {"type": "array", "items": {"title": "Matrix values", "type": "number"}, "maxItems": 9}, "description": {"title": "Description", "type": "string", "minLength": 1}, "image": {"title": "Image", "type": "string"}, "status": {"title": "Status", "type": "string", "enum": ["good", "deleted"]}}}, "Queue": {"required": ["status"], "type": "object", "properties": {"id": {"title": "ID", "type": "integer", "readOnly": true}, "creator": {"title": "Creator", "type": "string", "readOnly": true}, "moderator": {"title": "Moderator", "type": "string", "readOnly": true}, "status": {"title": "Status", "type": "string", "enum": ["draft", "deleted", "formed", "finished", "denied"]}, "image_in": {"title": "Image in", "type": "string", "readOnly": true, "minLength": 1, "x-nullable": true}, "image_out": {"title": "Image out", "type": "string", "x-nullable": true}, "creation_date": {"title": "Creation date", "type": "string", "format": "date-time", "readOnly": true}, "submition_date": {"title": "Submition date", "type": "string", "format": "date-time", "x-nullable": true}, "completion_date": {"title": "Completion date", "type": "string", "format": "date-time", "x-nullable": true}}}, "QueueWithFilter": {"required": ["creation_date", "status"], "type": "object", "properties": {"id": {"title": "ID", "type": "integer", "readOnly": true}, "creation_date": {"title": "Creation date", "type": "string", "format": "date-time"}, "submition_date": {"title": "Submition date", "type": "string", "format": "date-time", "x-nullable": true}, "creator": {"title": "Creator", "type": "string", "readOnly": true}, "moderator": {"title": "Moderator", "type": "string", "readOnly": true}, "temp_image_in": {"title": "Temp image in", "type": "string", "readOnly": true}, "temp_image_out": {"title": "Temp image out", "type": "string", "readOnly": true}, "filter_list": {"title": "Filter list", "type": "string", "readOnly": true}, "status": {"title": "Status", "type": "string", "enum": ["draft", "deleted", "formed", "finished", "denied"]}}}, "ResolveQueue": {"required": ["status"], "type": "object", "properties": {"status": {"title": "Status", "type": "string", "enum": ["formed", "finished"]}}}, "User": {"required": ["email", "password"], "type": "object", "properties": {"email": {"title": "Email адрес", "type": "string", "format": "email", "maxLength": 254, "minLength": 1}, "password": {"title": "Пароль", "type": "string", "maxLength": 255, "minLength": 1}, "is_staff": {"title": "Is staff", "type": "boolean", "default": false}, "is_superuser": {"title": "Is superuser", "type": "boolean", "default": false}}}}}